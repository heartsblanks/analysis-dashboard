<div class="pap-details">
  <h1 class="title">PAP: {{ pap }}</h1>

  <section>
    <h2 (click)="toggleQueues()" class="section-header">
      Queues
      <span *ngIf="expandedQueuesSection">[-]</span>
      <span *ngIf="!expandedQueuesSection">[+]</span>
    </h2>

    <!-- Accordion section for queues -->
    <div *ngIf="expandedQueuesSection" [@expandCollapseAnimation]>
      <!-- If queues exist, display them -->
      <div *ngIf="queues.length > 0" class="accordion">
        <div *ngFor="let queue of queues; let i = index" class="accordion-item">
          <!-- Queue name clickable to expand/collapse -->
          <h3 (click)="toggleQueue(i)" class="accordion-header">
            {{ queue.queue_name }} 
            <span *ngIf="expandedQueues[i]">[-]</span> <!-- Collapse indicator -->
            <span *ngIf="!expandedQueues[i]">[+]</span> <!-- Expand indicator -->
          </h3>

          <!-- Queue details only shown if expanded -->
          <div *ngIf="expandedQueues[i]" class="accordion-body" [@expandCollapseAnimation]>
            <p><strong>Queue Type:</strong> {{ queue.queue_type }}</p>

            <!-- Display Queue Attributes -->
            <div class="queue-attributes">
              <h4>Attributes:</h4>
              <ul>
                <li *ngFor="let def of queue.definitions">
                  <strong>{{ def.attribute_key }}:</strong> {{ def.attribute_value }}
                </li>
              </ul>
            </div>

            <!-- Display Target Queue (if exists) -->
            <div *ngIf="queue.target_queue" class="target-queue">
              <h4>Target Queue: {{ queue.target_queue.queue_name }}</h4>
              <ul>
                <li *ngFor="let attr of queue.target_queue.attributes">
                  <strong>{{ attr.attribute_key }}:</strong> {{ attr.attribute_value }}
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>

      <div *ngIf="queues.length === 0">
        <p>No queues found for this PAP.</p>
      </div>
    </div>
  </section>
</div>