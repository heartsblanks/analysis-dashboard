<div class="pap-details">
  <h1 class="title">PAP: {{ pap }}</h1>

  <section>
    <h2 (click)="toggleQueues()" class="section-header">
      Queues
      <span *ngIf="expandedQueuesSection">[-]</span>
      <span *ngIf="!expandedQueuesSection">[+]</span>
    </h2>

    <div *ngIf="expandedQueuesSection" [@expandCollapseAnimation]>
      <!-- If queues exist, display them -->
      <div *ngIf="queues.length > 0">
        <div *ngFor="let queue of queues; let i = index" class="queue-card" (click)="toggleQueue(i)">
          <!-- Queue name clickable to expand/collapse -->
          <div class="queue-header">
            <h3>{{ queue.queue_name }}</h3>
            <span *ngIf="expandedQueues[i]">[-]</span>
            <span *ngIf="!expandedQueues[i]">[+]</span>
          </div>

          <!-- Queue details only shown if expanded -->
          <div *ngIf="expandedQueues[i]" class="queue-details" [@expandCollapseAnimation]>
            <p><strong>Type:</strong> {{ queue.queue_type }}</p>

            <!-- Queue Attributes -->
            <div class="queue-attributes">
              <h4>Attributes</h4>
              <ul>
                <li *ngFor="let def of queue.definitions">
                  <strong>{{ def.attribute_key }}:</strong> {{ def.attribute_value }}
                </li>
              </ul>
            </div>

            <!-- Target Queue -->
            <div *ngIf="queue.target_queue" class="target-queue">
              <h4>Target Queue: {{ queue.target_queue.queue_name }}</h4>
              <ul>
                <li *ngFor="let attr of queue.target_queue.attributes">
                  <strong>{{ attr.attribute_key }}:</strong> {{ attr.attribute_value }}
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>

      <div *ngIf="queues.length === 0">
        <p>No queues found for this PAP.</p>
      </div>
    </div>
  </section>
</div>