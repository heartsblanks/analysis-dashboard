<div class="pap-details">
  <h1>Details for PAP: {{ pap }}</h1>

  <section>
    <h2 (click)="toggleQueues()" class="section-header">
      Queues
      <span *ngIf="expandedQueuesSection">[-]</span>
      <span *ngIf="!expandedQueuesSection">[+]</span>
    </h2>

    <!-- Only show the queue section if expanded -->
    <div *ngIf="expandedQueuesSection">
      <!-- If queues exist, display them -->
      <div *ngIf="queues.length > 0">
        <div *ngFor="let queue of queues; let i = index" class="queue-section">

          <!-- Queue name clickable to expand/collapse -->
          <h3 (click)="toggleQueue(i)" class="queue-header">
            {{ queue.queue_name }} 
            <span *ngIf="expandedQueues[i]">[-]</span>  <!-- Collapse indicator -->
            <span *ngIf="!expandedQueues[i]">[+]</span> <!-- Expand indicator -->
          </h3>

          <!-- Queue details only shown if expanded -->
          <div *ngIf="expandedQueues[i]" class="queue-details">
            <p>Queue Type: {{ queue.queue_type }}</p>

            <!-- Display Queue Attributes -->
            <div class="queue-attributes">
              <h4>Attributes:</h4>
              <ul>
                <li *ngFor="let def of queue.definitions">
                  <strong>{{ def.attribute_key }}:</strong> {{ def.attribute_value }}
                </li>
              </ul>
            </div>

            <!-- Display Target Queue (if exists) -->
            <div *ngIf="queue.target_queue" class="target-queue">
              <h4>Target Queue: {{ queue.target_queue.queue_name }}</h4>
              <ul>
                <li *ngFor="let attr of queue.target_queue.attributes">
                  <strong>{{ attr.attribute_key }}:</strong> {{ attr.attribute_value }}
                </li>
              </ul>
            </div>
          </div>

        </div>
      </div>

      <!-- If no queues are found -->
      <div *ngIf="queues.length === 0">
        <p>No queues found for this PAP.</p>
      </div>
    </div>
  </section>
</div>